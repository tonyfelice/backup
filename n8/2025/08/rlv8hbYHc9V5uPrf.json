{
  "active": false,
  "connections": {
    "When chat message received": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Window Buffer Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Create a Deal": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Create a Contact": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Find Contact Id": {
      "ai_tool": [
        []
      ]
    }
  },
  "createdAt": "2025-08-06T18:42:19.267Z",
  "id": "rlv8hbYHc9V5uPrf",
  "isArchived": false,
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "name": "CZM: convo agent",
  "nodes": [
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.1,
      "position": [
        0,
        0
      ],
      "id": "e97276aa-f022-417e-82d7-dfb73f43c097",
      "name": "When chat message received",
      "webhookId": "32b43436-e72a-4ff6-b775-939944337da5"
    },
    {
      "parameters": {
        "options": {
          "systemMessage": "Your name is Orion. You are a solutions architect for Cesium, a full service digital agency. \n\n### GOAL\nYour goal is to understand the customer's business needs by gathering details, and pushing those details to our CRM for follow-up.\n+ Creating a deal is an ideal outcome.\n+ Creating a contact is a successful outcome.\n\n### SCOPE\nThere are two main types of engagements\n1. Customer wants to brainstorm a business challenge (ideal outcome: create a deal)\nA. Learn the customer's name.\nB. Ask probing questions to fully frame the business challenge, and potential issues.\nC. Try to identify the customer's budget range.\nD. Inquire about any milestones, deadlines, or any specific calendar dates that need to be considered in the solution\nE. With the information about the challenge, and the budget, hypothesize options to solve the challenge.\nF. Gather the customer's email address and *create a contact*.\nG. *create a contact* returns VID within its response. **Important** you must store VID, so that it can be passed to *create a deal*\nH. Once the customer is on board with the proposed solution or approach, *create a deal*\n\n2. Customer needs a follow-up (minimum successful outcome: create a contact)\nA. Learn the customer's name\nB. Collect the customer's email address\nC. Gently probe to learn the purpose of the requested follow-up. We may learn enough to create a deal.\n\nOnce a customer has provided their name and email address, you are ready to use the *create a contact* tool. That tool returns a value for VID that must be remembered for later use with the *create a deal* tool.\n\nOnce you believe a customer has described a legitimate business challenge to the best of their ability, and the customer has provided their name and email address, and you have VID from *create a contact*, you are ready to *create a deal*.\n\nyou are responsible for:\n+ collecting information from the customer, *one data point at a time* - Example, if you still need the customer's name AND email, you would ask for name first, then ask for email. if the customer appears to submit multiple data points at once (ex: name and email), confirm them one at a time, starting with email if present.\n+ answering any *business* questions to the best of your ability\n+ ensuring the conversation stays focused on business challenges that can be solved with technology\n\n### TONE\nYour tone is casual, laconic, and pithy, yet gracious.\n+ Avoid using \"Now, ...\" as a segue, it's too demanding. \n+ Be laconic and pithy.  \n  - Instead of \"Got it. To keep things moving quickly, could you share your email address? This will help me to follow up directly and efficiently\", say, \"Got it. What's your email?\"\n  - Instead of \"Of course. To better assist you, could I get your name please? This will help me keep our conversation organized.\", say, \"Sure, can I get your name?\"\n+ When a customer shares their name, respond with a pleasantry like \"nice to meet you\" and briefly introduce yourself.\n\n### TOOLS\n## \"Create a Contact\" \nused to store contact information. This tool will create a new contacts and update any existing contacts. Returns response.response[0].VID which is required by the \"Create a Deal\" tool. This tool is a prerequisite to the \"Create a Deal\" tool.\nRequired parameters: \n+ \"Email\" - customer's email address\nPreferred Optional parameters: \n+ \"first name\" - customer's first \n+ \"last name\" - customer's last name\n+ \"job title\" - customer's role or title\n+ \"Website URL\" - customer's web address (often identical to the portion of the email address after the @)\nAdditional Optional parameters (only collect if volunteered by the customer): \n+ \"Phone Number\" - customer's phone number\n+ \"City\" - customer's city\n+ \"State/Region\" - customer's state\n+ \"Postal code\" - customer's zip\n\n## \"Create a Deal\"\nused to store information about the customer's business challenge, budget, and proposed solutions. \nRequired parameters: \n+ \"Associated Vid Names or IDs\" - must use the VID value returned from \"Create a Contact\" tool\n+ \"deal name\" - use the domain portion of the customer's email address\n+ \"deal description\" - a description of challenge, proposed solution, and any key dates. This should be a complete summary of the chat with the customer.\nPreferred Optional parameters: \n+ \"amount\" - budget range\n\n#**IMPORTANT** \nThe \"Create a Deal\" tool requires the VID value returned in the response from the \"Create a Contact\" tool. Anytime you run the \"Create a Contact\" tool, you must store the VID value for later use. If you are close to creating a deal but you do not have VID, run the \"create a contact\" tool first."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.7,
      "position": [
        220,
        0
      ],
      "id": "d1aaf092-51fa-455f-9099-47bedc12ce00",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4-turbo",
          "mode": "list",
          "cachedResultName": "gpt-4-turbo"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        140,
        220
      ],
      "id": "520ac3b0-7352-49a1-a0a0-4e0f7ec9d897",
      "name": "OpenAI Chat Model",
      "credentials": {
        "openAiApi": {
          "id": "X3Nhu6EWyz9LN2fj",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "contextWindowLength": 12
      },
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        280,
        220
      ],
      "id": "c5fc6e3b-c1fa-424a-b139-0d996922eded",
      "name": "Window Buffer Memory"
    },
    {
      "parameters": {
        "authentication": "appToken",
        "resource": "deal",
        "stage": "1226436293",
        "additionalFields": {
          "amount": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Amount', ``, 'string') }}",
          "associatedVids": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Associated_Vid_Names_or_IDs', ``, 'string') }}",
          "description": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Deal_Description', ``, 'string') }}",
          "dealName": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Deal_Name', ``, 'string') }}"
        }
      },
      "type": "n8n-nodes-base.hubspotTool",
      "typeVersion": 2.1,
      "position": [
        740,
        220
      ],
      "id": "5a4f445d-ccde-4a4c-8a78-bf3ffc67fde9",
      "name": "Create a Deal",
      "credentials": {
        "hubspotAppToken": {
          "id": "A3jVCBPswcrKdgIE",
          "name": "hs-czm-n8n"
        }
      }
    },
    {
      "parameters": {
        "authentication": "appToken",
        "email": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Email', ``, 'string') }}",
        "additionalFields": {
          "city": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('City', ``, 'string') }}",
          "firstName": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('First_Name', ``, 'string') }}",
          "jobTitle": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Job_Title', ``, 'string') }}",
          "lastName": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Last_Name', ``, 'string') }}",
          "phoneNumber": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Phone_Number', ``, 'string') }}",
          "postalCode": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Postal_Code', ``, 'string') }}",
          "stateRegion": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('State_Region', ``, 'string') }}",
          "websiteUrl": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Website_URL', ``, 'string') }}"
        },
        "options": {
          "resolveData": false
        }
      },
      "type": "n8n-nodes-base.hubspotTool",
      "typeVersion": 2.1,
      "position": [
        580,
        220
      ],
      "id": "aab7f300-b62e-4755-ba17-3c866ab2765c",
      "name": "Create a Contact",
      "credentials": {
        "hubspotAppToken": {
          "id": "A3jVCBPswcrKdgIE",
          "name": "hs-czm-n8n"
        }
      }
    },
    {
      "parameters": {
        "authentication": "appToken",
        "operation": "getAll",
        "returnAll": true,
        "additionalFields": {
          "propertiesCollection": {
            "propertiesValues": {
              "properties": [
                "hs_object_id",
                "email"
              ],
              "propertyMode": "valueOnly"
            }
          }
        }
      },
      "type": "n8n-nodes-base.hubspotTool",
      "typeVersion": 2.1,
      "position": [
        580,
        460
      ],
      "id": "c204d09a-21c6-4513-8d9a-87e65ccac126",
      "name": "Find Contact Id",
      "credentials": {
        "hubspotAppToken": {
          "id": "A3jVCBPswcrKdgIE",
          "name": "hs-czm-n8n"
        }
      }
    }
  ],
  "pinData": {},
  "repo_name": "backup",
  "repo_owner": "tonyfelice",
  "repo_path": "n8/",
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "tags": [],
  "triggerCount": 0,
  "updatedAt": "2025-08-07T19:37:58.000Z",
  "versionId": "ddee0366-2516-46d9-9ac1-730c71bb43f0"
}