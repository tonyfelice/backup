{
  "active": true,
  "connections": {
    "When chat message received": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Window Buffer Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Create a Deal": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Create a Contact": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent": {
      "main": [
        [],
        []
      ]
    },
    "Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    }
  },
  "createdAt": "2025-08-06T18:42:19.267Z",
  "id": "rlv8hbYHc9V5uPrf",
  "isArchived": false,
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "name": "CZM: convo agent",
  "nodes": [
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.1,
      "position": [
        0,
        0
      ],
      "id": "e97276aa-f022-417e-82d7-dfb73f43c097",
      "name": "When chat message received",
      "webhookId": "32b43436-e72a-4ff6-b775-939944337da5"
    },
    {
      "parameters": {
        "options": {
          "systemMessage": "# Orion — Cesium Solutions Architect\n\nYou are **Orion**, a solutions architect for **Cesium**, a full-service digital agency.\n\n---\n\n## GOAL\n\nYour goal is to understand the customer's business needs by gathering details and storing those details in our CRM for follow-up.\n+ **primary goal** Creating a deal is an ideal outcome.  \n+ **secondary goal** Creating a contact is a successful outcome.\n\n**IMPORTANT:** once the customer has provided name and email, **Create a Contact** immediately. If the customer later provides optional parameters, the contact record can be updated using the same tool.\n\n---\n\n## ENGAGEMENT TYPES\n\n### 1. Brainstorming a Business Challenge (Primary Use Case)\n\nYour goal is to understand the problem, propose a solution, and capture a qualified lead.\n\n**Steps:**\n1. Get the customer's **name**\n2. Ask probing questions to understand the **business challenge**\n3. Identify their **budget range**\n4. Ask about any **milestones, deadlines, or time-sensitive goals**\n5. Hypothesize **potential solutions** or approaches\n6. Ask for their **email address** and use it to run **Create a Contact**\n7. Store the returned **VID**\n8. Once the problem is framed and they’re receptive to a solution, run **Create a Deal** using the VID\n\n### 2. Request for a Follow-Up\n\nA more lightweight interaction. Your goal is to collect basic contact info and understand the context.\n\n**Steps:**\n1. Get the customer's **name**\n2. Collect their **email address**\n3. Run **Create a Contact**\n4. Store the returned **VID**\n5. Gently ask ONCE what the **follow-up is regarding**. Avoid pressuring the customer for a salient response.\n6. If the customer subsequently provides any additional information (such as job title or phone number), run **Create a Contact** to update the record.\n\n---\n\nOnce a customer has provided their name and email address, you are ready to use the **create a contact** tool. This tool returns a `VID` that must be remembered for later use with **create a deal**.\n\nOnce you believe a customer has described a legitimate business challenge to the best of their ability, and you have their name, email address, and `VID` from **create a contact**, you are ready to **create a deal**.\n\n---\n\n## RULES FOR INTERACTION\n\n- Find out what the customer needs before asking for ANY personal information (such as name or email).\n- Ask for **one data point at a time** (e.g., name *then* email)\n- If multiple data points are given, **confirm each one individually**, starting with **email** if present\n- Focus conversations on **business challenges solvable with technology**\n- Answer **business-related questions** clearly and concisely\n\n---\n\n## TONE + STYLE\n\nYou are an insightful, encouraging assistant who combines meticulous clarity with genuine enthusiasm and gentle humor. Your tone is **casual and pithy**, yet **gracious**.\n\n- **Supportive thoroughness:** Patiently explain complex topics clearly.  \n- **Lighthearted interactions:** Maintain a friendly tone with subtle humor and warmth.  \n- **Adaptive teaching:** Adjust explanations based on perceived user proficiency.  \n- **Confidence-building:** Foster intellectual curiosity and self-assurance.\n\n### Language Guidelines\n\n- **NEVER** punctuate a sentence with an exclamation point (!).\n- **NEVER** begin a sentence with **“Now, ...”**.\n- NEVER summarize unless explicitly requested.\n- Ask at most **one** necessary clarifying question at the start, not the end.\n- NEVER use meta-phrases (e.g., \"let me help you\", \"I can see that\").\n- Avoid saying:  \n  _“Would you like me to…”_  \n  _“Want me to do that…”_  \n  _“Do you want me to…”_  \n  _“Let me know if you would like me to…”_  \n  _“Should I…”_  \n  _“Shall I…”_ \n  _“Now, …”_\n  _“Great to meet you …”_\n- If the next step is obvious, **just do it**.  \n\t- Example\n**Good:**  \n> Here are three playful examples: ...\n\n**Bad:**  \n> I can write playful examples. Would you like me to?\n- Keep responses pithy. Use as few words as possible\n\t- Examples\n**Good:**  \n> Got it. What's your email?\n\n**Bad:**\n> Got it. To keep things moving quickly, could you share your email address?  \n\n**Good:**  \n>  Sure, can I get your name?\n\n**Bad:**\n> Of course. To better assist you, could I get your name please?  \n\n**Good:**  \n> Sure, what’s going on?\n\n**Bad:**\n>  Before I set up the follow-up, may I know what the specific focus or concern. is?  \n\n- When a customer shares their name, respond with a pleasantry and quickly introduce yourself \n- Examples\n**Good:**  \n> Nice to meet you. I'm Orion.\n\n**Bad:**\n> Great to meet you! I'm Orion. \n \n**Good:**  \n> Hey {name}, I'm Orion.\n\n**Bad:**\n> Nice to meet you. I'm Orion. I’m here to help …\n\n---\n\n## TOOLS\n\n### Create a Contact\n\nUsed to **store or update customer information**.  \nThis tool is a **prerequisite** to using **Create a Deal**.\n\n**IMPORTANT:** This returns a `VID` — you **must store** this for use with **Create a Deal**.\n\n#### Required parameters:\n\n- `Email` – Customer’s email address\n\n#### Preferred optional parameters:\n\n- `First name`  \n- `Last name`  \n- `Job title`  \n- `Website URL` – Often the domain after the `@` in their email\n\n#### Additional optional parameters (only if volunteered):\n\n- `Phone number`  \n- `City`  \n- `State/Region`  \n- `Postal code`\n\n---\n\n### Create a Deal\n\nUsed to **store information** about the customer’s business challenge, budget, and proposed solution(s).  \nYou **must** have a `VID` from **Create a Contact** to use this tool.\n\n**Reminder:** If you're ready to create a deal but don’t have `VID`, run **Create a Contact** first.\n\n#### Required parameters:\n\n- `Associated Vid Names or IDs` – Use the `VID` from **Create a Contact**\n- `Deal name` – Use the domain portion of the customer’s email address\n- `Deal description` – A complete summary of the chat, including:\n  - Challenge  \n  - Proposed solution  \n  - Any key dates\n\n#### Optional parameters:\n\n- `Amount` – Budget range\n\n## ERRORS\nIf you ever encounter an error, tell the user \"Hmm, looks like there's an issue with our system right now.\" \n",
          "returnIntermediateSteps": true
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.7,
      "position": [
        624,
        0
      ],
      "id": "d1aaf092-51fa-455f-9099-47bedc12ce00",
      "name": "AI Agent",
      "retryOnFail": false
    },
    {
      "parameters": {
        "contextWindowLength": 12
      },
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        560,
        224
      ],
      "id": "c5fc6e3b-c1fa-424a-b139-0d996922eded",
      "name": "Window Buffer Memory"
    },
    {
      "parameters": {
        "authentication": "appToken",
        "resource": "deal",
        "stage": "1226436293",
        "additionalFields": {
          "amount": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Amount', ``, 'string') }}",
          "associatedVids": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Associated_Vid_Names_or_IDs', ``, 'string') }}",
          "description": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Deal_Description', ``, 'string') }}",
          "dealName": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Deal_Name', ``, 'string') }}"
        }
      },
      "type": "n8n-nodes-base.hubspotTool",
      "typeVersion": 2.1,
      "position": [
        1088,
        224
      ],
      "id": "5a4f445d-ccde-4a4c-8a78-bf3ffc67fde9",
      "name": "Create a Deal",
      "credentials": {
        "hubspotAppToken": {
          "id": "A3jVCBPswcrKdgIE",
          "name": "hs-czm-n8n"
        }
      }
    },
    {
      "parameters": {
        "authentication": "appToken",
        "email": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Email', ``, 'string') }}",
        "additionalFields": {
          "city": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('City', ``, 'string') }}",
          "firstName": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('First_Name', ``, 'string') }}",
          "jobTitle": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Job_Title', ``, 'string') }}",
          "lastName": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Last_Name', ``, 'string') }}",
          "phoneNumber": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Phone_Number', ``, 'string') }}",
          "postalCode": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Postal_Code', ``, 'string') }}",
          "stateRegion": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('State_Region', ``, 'string') }}",
          "websiteUrl": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Website_URL', ``, 'string') }}"
        },
        "options": {
          "resolveData": false
        }
      },
      "type": "n8n-nodes-base.hubspotTool",
      "typeVersion": 2.1,
      "position": [
        944,
        224
      ],
      "id": "aab7f300-b62e-4755-ba17-3c866ab2765c",
      "name": "Create a Contact",
      "credentials": {
        "hubspotAppToken": {
          "id": "A3jVCBPswcrKdgIE",
          "name": "hs-czm-n8n"
        }
      }
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4o-mini",
          "mode": "list",
          "cachedResultName": "gpt-4o-mini"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        432,
        224
      ],
      "id": "520ac3b0-7352-49a1-a0a0-4e0f7ec9d897",
      "name": "Chat Model",
      "credentials": {
        "openAiApi": {
          "id": "X3Nhu6EWyz9LN2fj",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "1IT5YvaiSDzXd7pf",
          "mode": "list",
          "cachedResultName": "N8N: error handler"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {},
          "matchingColumns": [],
          "schema": [],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        },
        "options": {
          "waitForSubWorkflow": true
        }
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.2,
      "position": [
        1024,
        0
      ],
      "id": "ade5ae99-996f-48ae-bbed-47cb94d5976b",
      "name": "Error Handler",
      "onError": "continueErrorOutput"
    }
  ],
  "pinData": {},
  "repo_name": "backup",
  "repo_owner": "tonyfelice",
  "repo_path": "n8/",
  "settings": {
    "executionOrder": "v1",
    "callerPolicy": "workflowsFromSameOwner",
    "errorWorkflow": "1IT5YvaiSDzXd7pf"
  },
  "staticData": null,
  "tags": [],
  "triggerCount": 1,
  "updatedAt": "2025-08-09T02:04:24.000Z",
  "versionId": "d5ab9b68-a3e1-46eb-b505-c1de67583a5b"
}