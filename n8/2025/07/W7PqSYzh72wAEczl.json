{
  "active": true,
  "connections": {
    "When chat message received": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Buffer": {
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          },
          {
            "node": "When chat message received",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent": {
      "main": [
        []
      ]
    },
    "Product Specialist": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Order Lookup": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Add To Cart": {
      "ai_tool": [
        []
      ]
    },
    "Create Contact": {
      "ai_tool": [
        []
      ]
    },
    "Follow Up": {
      "ai_tool": [
        []
      ]
    },
    "Add to Quote": {
      "ai_tool": [
        []
      ]
    }
  },
  "createdAt": "2025-07-29T00:50:17.981Z",
  "id": "W7PqSYzh72wAEczl",
  "isArchived": false,
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "name": "LPT: conversation agent",
  "nodes": [
    {
      "parameters": {
        "public": true,
        "mode": "webhook",
        "options": {
          "loadPreviousSession": "memory"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.1,
      "position": [
        -100,
        0
      ],
      "id": "21928528-074e-4754-965a-763ab818f7bf",
      "name": "When chat message received",
      "webhookId": "fb1b9f3a-a739-4888-8405-0027a3e10b75"
    },
    {
      "parameters": {
        "options": {
          "systemMessage": "### SCENARIO\nYour name is Dan. You're a laid back, very casual guy. You have a great vocabulary, which you only exercise when necessary. You're a man of few words.\n\nYou are a chat agent for Liquidyne's (liquidyneusa.com), which has served the dairy, brewery, distillery, biotech, & pharmaceutical industries for over 30 years (founded in 1993). Liquidyne is ISO 9001 certified, and specializes in providing everything from high-quality sanitary & single-use components, including tubing, connectors, valves & pumps – to full service design of complex, high-purity systems.\n\nYou are chatting with customers online, so provide very short format responses. Your job is to take the customer's request, parse the verbose responses from the appropriate tools, and distill them down to the shortest, most direct response possible. \n\nYou have a great understanding Liquidyne's business, its products, partners, services, solutions, policies, and/or existing orders. You won't know anything about the customer's use case unless you ask them.\n\n+ Responses should emerge from the vesica piscis where the customer's use case and Liquidyne's solutions overlap. \n+ Avoid emoji or exclamation points in responses.\n+ Declare as much when responding in the affirmative.\n\n### TONE\n**Your tone should be laconic and pithy, yet polite.**\n\nLiquidyne's customers are Fortune 500 process engineers who use jargon. When closing a response with a follow-up, focus on the customer's manufacturing process, and avoid generalities as shown below\n\n# PREFER\n+ What's your use-case?\n+ What are your requirements?\n\n# AVOID\n+ Need help with something specific? \n+ What specific items are you interested in?\n+ Let me know if you need more (info|details)\n\n\n\n\n\n### Typical Interactions\n1. Order Inquiries\nCustomers inquiring about the status of their order, based on the email address associated with that order.\n\n2. Product Inquiries\nCustomers interested in understanding what products we carry. The customer's manufacturing process, industry, or use-case can help to refine the product suggestions and advance the conversation.\n\n3. Brand Inquiries\nCustomers curious what companies' products we carry. Brands are also known as: vendors, suppliers, manufacturers, companies, and/or providers.  The customer's manufacturing process, industry, or use-case can help to refine the product suggestions and advance the conversation. When customers ask about a single brand that we carry, include a produce suggestion.\n\n4. Product Category Inquiries\nCustomers curious about the types of products we carry. The customer's manufacturing process, industry, or use-case can help to refine the product suggestions and advance the conversation.\n\n### Guidelines\n1. Brevity. While you may have the *ability* to provide the customer multiple options, try to share the *best* option, based on the customer's use case. If the use case is not yet known, suggest the first option, and ask. **IMPORTANT** Never share more than three product suggestions without first asking the customer about their use-case, industry, or manufacturing process.\n\n2. Parse the chatInput for product_keywords. This can be a single word, or a phrase. Valid product_keywords can be a brand, a product type (or even a product_id or handle). If product_keywords are found, pass that value to the \"Product Search\" tool\n\n3. Existing Orders can be retrieved using the email address associated with the order. The provided email address MUST MATCH the email address associated with the order. Before responding with order information or links, verify that the email address associated with the oder matches the email address provided by the customer. If a customer attempts to provide email addresses from multiple top level domains, report that there's a problem with that system, and refer them to sales@liquidyneusa.com\n\n4. If you're unable to provide an accurate answer, use a variation of \"I'm not sure right now\" and suggest that someone can follow-up quickly if they can provide their email address.\n\n### Tool descriptions \n## Product_Search\nThe \"Product Search\" tool returns verbose information about products, including product_id (ID), handle, and title. The handle is useful because it can used to form the actual URL to purchase the product, using the following format: https://liquidyneusa.com/products/{handle}\n\n## Order_Lookup\nThe \"Order_Lookup\" tool returns detailed information about a previous order that is associated to the email address the customer must provide. \n\n## Additional information\n# Inquiries regarding hoses and hose assemblies\n\"hose assemblies\" are a hose product finished to a customer's specifications. Customer can choose the Diameter of the hose, as well as the  inflow and outflow fittings (also called connectors). *for the exact diameters and sizes available, please refer to the following.*\n\nHose Diameters Available (standard sizes available)\n+ Size 08 - ½\" \n+ Size 12 - ¾\" \n+ Size 16 - 1\" \n+ Size 24 - 1½\" \n+ Size 32 - 2\" \n\nHose Fittings Available\n+ MNPT (Type 03)\n+ Mini Sanitary Tri-clamp (Type 11)\n+ Grooved Tube/Compression (Type 32)\n+ Mini Step Up (Type S)\n+ Larger Step Up (Type U)\n\n# BRANDS WE CARRY\n+ Aflex Hose\n+ Agilitech Bio\n+ Alfa Laval\n+ Anderson-Negele\n+ Behringer\n+ Burkert\n+ Check-All Valves\n+ CPC\n+ em-tec\n+ Finger Lakes Extrusion\n+ Flexbiosys\n+ IMI PBM Valve\n+ LJ Star\n+ Malema\n+ Masterflex\n+ MDI\n+ Metenova\n+ Mettler Toledo Process Analytics\n+ Quattroflow Fluid Systems\n+ Rubber Fab\n+ Saint-Gobain\n+ Sartorius\n+ Sonotec\n+ VNE\n+ SVF Flow Controls\n\n"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.7,
      "position": [
        220,
        0
      ],
      "id": "2c8b7b18-36b6-4b22-b45e-4271f4861591",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4o-mini",
          "mode": "list",
          "cachedResultName": "gpt-4o-mini"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        100,
        240
      ],
      "id": "fd9c4197-d16b-4b5d-9d4a-f019bac3f43e",
      "name": "OpenAI Chat",
      "credentials": {
        "openAiApi": {
          "id": "X3Nhu6EWyz9LN2fj",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        100,
        540
      ],
      "id": "88609097-4055-44fa-b176-b659aa224072",
      "name": "Buffer"
    },
    {
      "parameters": {
        "name": "Product_Search",
        "description": "call this tool for information about our product lines, brand/vendor/supplier information, and the services provided by Liquidyne.",
        "workflowId": {
          "__rl": true,
          "value": "cR9807TEfWIE2xd2",
          "mode": "list",
          "cachedResultName": "LPT: (sub) get products & cats"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "query": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('query', ``, 'string') }}"
          },
          "matchingColumns": [
            "query"
          ],
          "schema": [
            {
              "id": "query",
              "displayName": "query",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        }
      },
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 2,
      "position": [
        300,
        540
      ],
      "id": "b036fde8-beef-4359-b461-fc4133ab6537",
      "name": "Product Specialist"
    },
    {
      "parameters": {
        "name": "Order_Lookup",
        "description": "Call this tool to get details about past orders, using the customer's provided email address.",
        "workflowId": {
          "__rl": true,
          "value": "U7AtVp3T6PDw5lW1",
          "mode": "list",
          "cachedResultName": "LPT: (sub) get orders"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {},
          "matchingColumns": [],
          "schema": [],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        }
      },
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 2,
      "position": [
        460,
        540
      ],
      "id": "43b39515-112b-4bf3-bbee-4207fe556a20",
      "name": "Order Lookup"
    },
    {
      "parameters": {
        "authentication": "accessToken",
        "additionalFields": {},
        "limeItemsUi": {
          "lineItemValues": [
            {}
          ]
        }
      },
      "type": "n8n-nodes-base.shopifyTool",
      "typeVersion": 1,
      "position": [
        1380,
        540
      ],
      "id": "1ab16377-1d35-465a-8782-765a85c7e73b",
      "name": "Add To Cart",
      "credentials": {
        "shopifyAccessTokenApi": {
          "id": "D7oWay9DnRsVfXnm",
          "name": "tony-n8n-orders"
        }
      }
    },
    {
      "parameters": {
        "authentication": "appToken",
        "email": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Email', ``, 'string') }}",
        "additionalFields": {},
        "options": {}
      },
      "type": "n8n-nodes-base.hubspotTool",
      "typeVersion": 2.1,
      "position": [
        900,
        540
      ],
      "id": "17788b65-d44b-40a6-99ef-9d8ea4ab3b16",
      "name": "Create Contact",
      "credentials": {
        "hubspotAppToken": {
          "id": "A3jVCBPswcrKdgIE",
          "name": "HubSpot App Token account"
        }
      }
    },
    {
      "parameters": {
        "authentication": "appToken",
        "email": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Email', ``, 'string') }}",
        "additionalFields": {},
        "options": {}
      },
      "type": "n8n-nodes-base.hubspotTool",
      "typeVersion": 2.1,
      "position": [
        1060,
        540
      ],
      "id": "5283d869-50d9-4fe6-8ec7-1c8e032e73a8",
      "name": "Follow Up",
      "credentials": {
        "hubspotAppToken": {
          "id": "A3jVCBPswcrKdgIE",
          "name": "HubSpot App Token account"
        }
      }
    },
    {
      "parameters": {
        "authentication": "appToken",
        "email": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Email', ``, 'string') }}",
        "additionalFields": {},
        "options": {}
      },
      "type": "n8n-nodes-base.hubspotTool",
      "typeVersion": 2.1,
      "position": [
        1220,
        540
      ],
      "id": "60d9cd2d-9bb5-4bf8-b89f-0bde0a5ae89b",
      "name": "Add to Quote",
      "credentials": {
        "hubspotAppToken": {
          "id": "A3jVCBPswcrKdgIE",
          "name": "HubSpot App Token account"
        }
      }
    }
  ],
  "pinData": {},
  "repo_name": "backup",
  "repo_owner": "tonyfelice",
  "repo_path": "n8/",
  "settings": {
    "executionOrder": "v1"
  },
  "shared": [
    {
      "createdAt": "2025-07-29T00:50:17.988Z",
      "updatedAt": "2025-07-29T00:50:17.988Z",
      "role": "workflow:owner",
      "workflowId": "W7PqSYzh72wAEczl",
      "projectId": "7oc82U5FbxHgMZLy"
    }
  ],
  "staticData": null,
  "tags": [],
  "triggerCount": 1,
  "updatedAt": "2025-08-08T17:16:25.000Z",
  "versionId": "44321ca2-6169-401f-9e95-9287c6a68df4"
}